<!DOCTYPE html>
<body>
 <div class="container">
        <div class="row">
            <div class="col-md-4 col-md-offset-4" style="margin-top: 100px;">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Activate Account</h3>
                    </div>
                    <div class="panel-body">
                        <form accept-charset="UTF-8" role="form" action="/login"  id="passwordform" method = "POST" >
                            <fieldset>
								<div class="form-group">
									<label>Enter Password</label>
									<br>
                                    <input class="form-control" placeholder="Password" id="txt_password" name="password" type="password">
                                </div>
                                <div class="form-group">
									<label >Confirm Password</label>
									<br>
                                    <input class="form-control" placeholder="Password" name="retype" id="txt_retype" type="password" value="">
                                </div>
								<hr/>
								<input type="hidden" id="txt_token" name="Language" value="[% token %]">
                                <input class="btn btn-lg btn-primary btn-block" type="submit" id="btn_login" name="btn_submit" value="Submit">
                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
    <link rel="stylesheet" type="text/css" href="../source/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../source/css/login.css">
    <link rel="stylesheet" type="text/css" href="../source/jquery-validation/demo/site-demos.css">
    <link rel="stylesheet" type="text/css" href="../source/DataTable/media/css/jquery.dataTables.css" />
	
	<script type="text/javascript" src="../source/js/jquery.js"></script>
    <script type="text/javascript" src="../source/bootstrap/dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="../source/jquery-validation/dist/jquery.validate.js"></script>
    <script type="text/javascript" src="../source/jquery-validation/dist/additional-methods.min.js"></script>
    <script type="text/javascript" src="../source/DataTable/media/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="../source/js/jquery.validate.min.js"></script>

    <script>
        $(document).ready(function() {
				$( "input" ).focus(function() {
				$('#resdata').hide();
			}); 
            jQuery.validator.setDefaults({
                debug: true,
                success: "valid"
            });

            $("#passwordform").validate({
                rules: {
                    password: {
                        required: true,
                    },
                    retype: {
                        required: true,
						equalTo : "#txt_password"
                    }
				},
				submitHandler: function(form) {
					var token = $('#txt_token').val();
					var password = $('#txt_password').val();
					$.ajax( 
					{ 
						url:'login/createpassword', 
						contentType:'text/html', 
						dataType:'html',
						data :{password : password, token : token}
					}).done(function(responseText)  
					{ 
						form.submit();
					}).fail(function(err)  
					{  
						alert("error" + err);  
					});

                }
			});
        });

    </script>

